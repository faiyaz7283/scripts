#!/usr/bin/env bash
set -euo pipefail

#-------------------------------------------------------------------------------
# Variables
#-------------------------------------------------------------------------------

token=${1}
master_host=${2:-192.168.1.175:6443}
ca_cert_hash=${3:-sha256:e6e5b73453f1ff5e1fc9654113e11c9aae70e097d2043828cc13c01f3ff8565f}

#-------------------------------------------------------------------------------
# Main
#-------------------------------------------------------------------------------

# Join the cluster
kubeadm join $master_host --token $token --discovery-token-ca-cert-hash $ca_cert_hash
